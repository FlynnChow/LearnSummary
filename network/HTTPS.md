## HTTPS

HTTPS开发的主要目的，是提供对网站服务器的身份认证，保护交换数据的隐私与完整性。

### 端口号

443

### SSL/TLS

HTTP:窃听风险 --> HTTPS:所有信息都是加密传输，第三方无法窃听

HTTP:篡改风险 --> HTTPS:加入了校验机制，第三方无法更改

HTTP:冒充风险 --> HTTPS:加入了身份证书，第三方无法冒充

#### 如何保证公匙不被修改

公匙储存在数字证书中，只要证书是可信的，就可保证公匙是可信的

#### 公匙加密时间过长，如何解决

由客户端和服务器共同生成一个对话秘匙，而公匙负责加密对话秘匙，这样就减少了时间

#### TLS/SSL握手

**第一次握手：**

客户端-->服务器

* 协议的版本，如TLS1.2

* 由客户端生成的随机数，用于后面生成对话秘匙

* 支持的加密方法

* 支持的压缩方法

**第二次握手：**

服务器-->客户端

* 确认协议版本，如果不支持就断开通信，并确认加密方法和压缩方法

* 由服务器生成的随机数字，并使用私匙加密

* 然后将加密后的随机数，数字证书发送给客户的

* 如果服务器需要，可以要求客户端发送客户端证书，只允许拥有证书的访问

**第三次握手：**

客户端-->服务器

* 客户端先检查服务端的数字证书是否真实有效

* 客户端用公匙解密服务端的随机数，然后再随机生成一个随机数，然后使用三个随机数生成对话秘匙
* 客户端将刚刚生成的随机数用公匙加密，然后再发送加密后的随机数，编码改变通知和握手接受通知
* 同时发送之前所有信息的hash值，用于给服务器校验

**第四次握手：**

服务器-->客户端

* 服务端用私匙解密随机数，之后也会利用三个随机数生成相同的对话秘匙
* 然后把握手接受通知，之前所有信息的hash值发送给客户端校验



### 证书

#### 三种认证级别

* 域名认证（domain）确认证书申请人拥有这个域名，只显示一把锁

* 公司认证（company/Organization）确认证书拥有者是一家公司，会显示锁和公司信息

* 扩展认证（extended）最高级别认证，会显示锁和公司名称

#### 三种证书范围

* 单域名证书：只能用于单个域名

* 通配符证书：可以用于一个域名及其一级子域名

* 多域名证书：可以用于多个域名

### 关于加密

#### 对称加密

指的就是加、解密使用的同是一串密钥

常见的有DES,AES,RC5,Blowfish,IDEA

对称加密的优点是效率高，速度快，适合大数据量的加密

#### 非对称加密

指的是加、解密使用不同的密钥，一把作为公开的公钥，另一把作为私钥。公钥加密的信息，只有私钥才能解密。反之，私钥加密的信息，只有公钥才能解密。 



常见的有RSA,DH,DSA,ECC

对称加密的优点是安全性高，但是效率速度较慢

https使用的加密就是RSA

#### 哈希加密

hash加密是一种不可逆的加密

常见的有MD-5,SHA-1

输入值一样，便可以得到相同的散列值，但是散列值一样，输入值不一定一样。

### HTTPS与HTTP

1. HTTPS需要到CA申请证书

2. HTTP是超文本传输协议，采用明文传输，HTTPS采用SSL加密传输协议，更安全。

3. HTTPS端口号是443，HTTP端口号是80

4. HTTP建立连接过程比HTTPS更快，HTTPS除了TCP的三次握手，还需要SSL的四次握手。建立连接后的数据传输，二者无差异。